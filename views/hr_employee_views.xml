<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- ===== Employee Form: add a dedicated "Biometric" tab safely ===== -->
    <record id="hr_employee_view_form_inherit_zk" model="ir.ui.view">
        <field name="name">hr.employee.form.inherit.zk.device_id</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <!-- Insert a new page inside the main notebook (exists in v18) -->
            <xpath expr="//form//sheet//notebook" position="inside">
                <page string="Biometric">
                    <group>
                        <field name="device_id_num"
                               placeholder="Numeric User ID on terminal"
                               help="User ID on the ZKTeco terminal (numeric ID shown on the device)."/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Fallback (in case some customizations remove the notebook): put field in first sheet group -->
    <record id="hr_employee_view_form_inherit_zk_fallback" model="ir.ui.view">
        <field name="name">hr.employee.form.inherit.zk.device_id.fallback</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="priority" eval="90"/>
        <field name="arch" type="xml">
            <!-- Only applies when no notebook is present; otherwise the XPath below is ignored -->
            <xpath expr="//form//sheet//group[1]" position="inside">
                <field name="device_id_num"
                       placeholder="Numeric User ID on terminal"
                       help="User ID on the ZKTeco terminal (numeric ID shown on the device)."/>
            </xpath>
        </field>
    </record>

    <!-- ===== Employee List (treeâ†’list in v18): show Device ID column ===== -->
    <record id="hr_employee_view_list_inherit_zk" model="ir.ui.view">
        <field name="name">hr.employee.list.inherit.zk.device_id</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_tree"/>
        <field name="arch" type="xml">
            <!-- Insert after the Name column (present in both CE/EE) -->
            <xpath expr="//list/field[@name='name']" position="after">
                <field name="device_id_num"/>
            </xpath>
        </field>
    </record>

    <!-- ===== Employee Search: allow filtering by Device ID ===== -->
<!--    <record id="hr_employee_view_search_inherit_zk" model="ir.ui.view">-->
<!--        <field name="name">hr.employee.search.inherit.zk.device_id</field>-->
<!--        <field name="model">hr.employee</field>-->
<!--        <field name="inherit_id" ref="hr.view_hr_employee_filter"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <xpath expr="//search" position="inside">-->
<!--                <field name="device_id_num" string="Biometric Device ID"/>-->
<!--                <separator/>-->
<!--                <filter name="has_device_id" string="Has Device ID" domain="[('device_id_num','!=',False)]"/>-->
<!--                <filter name="no_device_id" string="No Device ID" domain="[('device_id_num','=',False)]"/>-->
<!--            </xpath>-->
<!--        </field>-->
<!--    </record>-->

</odoo>
